"use strict";(globalThis.webpackChunkphysical_ai_platform_frontend=globalThis.webpackChunkphysical_ai_platform_frontend||[]).push([[3547],{8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var i=r(6540);const s={},t=i.createContext(s);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}},8736:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"module-1/week-3-services-actions/3-3-comparison-topic-service-action","title":"3.3: Comparison of Communication Patterns - Topic vs Service vs Action","description":"Overview","source":"@site/docs/module-1/week-3-services-actions/3-3-comparison-topic-service-action.md","sourceDirName":"module-1/week-3-services-actions","slug":"/module-1/week-3-services-actions/3-3-comparison-topic-service-action","permalink":"/docs/module-1/week-3-services-actions/3-3-comparison-topic-service-action","draft":false,"unlisted":false,"editUrl":"https://github.com/noor-ana/physical-ai-platform/tree/main/docs/module-1/week-3-services-actions/3-3-comparison-topic-service-action.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"difficulty":"beginner"},"sidebar":"tutorialSidebar","previous":{"title":"3.2: Understanding ROS 2 Actions","permalink":"/docs/module-1/week-3-services-actions/3-2-understanding-actions"},"next":{"title":"3.4: Practical Exercises - Communication Patterns Integration","permalink":"/docs/module-1/week-3-services-actions/3-4-communication-practical-exercises"}}');var s=r(4848),t=r(8453);const a={sidebar_position:3,difficulty:"beginner"},l="3.3: Comparison of Communication Patterns - Topic vs Service vs Action",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Communication Pattern Comparison",id:"communication-pattern-comparison",level:2},{value:"Key Differences Table",id:"key-differences-table",level:3},{value:"Detailed Comparison",id:"detailed-comparison",level:2},{value:"1. Topic Pattern",id:"1-topic-pattern",level:3},{value:"2. Service Pattern",id:"2-service-pattern",level:3},{value:"3. Action Pattern",id:"3-action-pattern",level:3},{value:"Choosing the Right Pattern: Decision Matrix",id:"choosing-the-right-pattern-decision-matrix",level:2},{value:"Decision Tree for Communication Pattern Selection",id:"decision-tree-for-communication-pattern-selection",level:3},{value:"Practical Examples and Use Cases",id:"practical-examples-and-use-cases",level:2},{value:"Sensor Data Management",id:"sensor-data-management",level:3},{value:"Robot Configuration System",id:"robot-configuration-system",level:3},{value:"Navigation System",id:"navigation-system",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Topics Performance",id:"topics-performance",level:3},{value:"Services Performance",id:"services-performance",level:3},{value:"Actions Performance",id:"actions-performance",level:3},{value:"Common Mistakes and Anti-patterns",id:"common-mistakes-and-anti-patterns",level:2},{value:"1. Topic Anti-patterns",id:"1-topic-anti-patterns",level:3},{value:"2. Service Anti-patterns",id:"2-service-anti-patterns",level:3},{value:"3. Action Anti-patterns",id:"3-action-anti-patterns",level:3},{value:"Migration Between Patterns",id:"migration-between-patterns",level:2},{value:"When to Change Patterns",id:"when-to-change-patterns",level:3},{value:"Best Practices Summary",id:"best-practices-summary",level:2},{value:"Pattern Selection Guidelines",id:"pattern-selection-guidelines",level:3},{value:"Architecture Considerations",id:"architecture-considerations",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"33-comparison-of-communication-patterns---topic-vs-service-vs-action",children:"3.3: Comparison of Communication Patterns - Topic vs Service vs Action"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This submodule compares the three primary communication patterns in ROS 2: topics, services, and actions. We'll examine their characteristics, appropriate use cases, and how to choose between them for different scenarios."}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this submodule, you will:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Compare the characteristics of topics, services, and actions"}),"\n",(0,s.jsx)(n.li,{children:"Identify appropriate use cases for each communication pattern"}),"\n",(0,s.jsx)(n.li,{children:"Understand the trade-offs between different communication patterns"}),"\n",(0,s.jsx)(n.li,{children:"Design effective communication architectures using the right patterns"}),"\n",(0,s.jsx)(n.li,{children:"Troubleshoot common issues related to communication pattern choice"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"communication-pattern-comparison",children:"Communication Pattern Comparison"}),"\n",(0,s.jsx)(n.h3,{id:"key-differences-table",children:"Key Differences Table"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"Topic"}),(0,s.jsx)(n.th,{children:"Service"}),(0,s.jsx)(n.th,{children:"Action"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Pattern"})}),(0,s.jsx)(n.td,{children:"Publish/Subscribe"}),(0,s.jsx)(n.td,{children:"Request/Reply"}),(0,s.jsx)(n.td,{children:"Goal/Feedback/Result"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Synchronicity"})}),(0,s.jsx)(n.td,{children:"Asynchronous"}),(0,s.jsx)(n.td,{children:"Synchronous"}),(0,s.jsx)(n.td,{children:"Synchronous (with async feedback)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Response"})}),(0,s.jsx)(n.td,{children:"No direct response"}),(0,s.jsx)(n.td,{children:"Guaranteed response"}),(0,s.jsx)(n.td,{children:"Result upon completion"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Duration"})}),(0,s.jsx)(n.td,{children:"Continuous"}),(0,s.jsx)(n.td,{children:"Short-lived"}),(0,s.jsx)(n.td,{children:"Potentially long-lived"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Feedback"})}),(0,s.jsx)(n.td,{children:"No progress updates"}),(0,s.jsx)(n.td,{children:"No progress updates"}),(0,s.jsx)(n.td,{children:"Continuous feedback"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Cancellation"})}),(0,s.jsx)(n.td,{children:"No cancellation"}),(0,s.jsx)(n.td,{children:"No cancellation"}),(0,s.jsx)(n.td,{children:"Cancelable"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Reliability"})}),(0,s.jsx)(n.td,{children:"Best-effort or reliable"}),(0,s.jsx)(n.td,{children:"Reliable"}),(0,s.jsx)(n.td,{children:"Reliable"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Use Case"})}),(0,s.jsx)(n.td,{children:"Streaming data"}),(0,s.jsx)(n.td,{children:"Configuration/queries"}),(0,s.jsx)(n.td,{children:"Long-running tasks"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"detailed-comparison",children:"Detailed Comparison"}),"\n",(0,s.jsx)(n.h3,{id:"1-topic-pattern",children:"1. Topic Pattern"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Characteristics:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Asynchronous communication"}),"\n",(0,s.jsx)(n.li,{children:"Multiple publishers/subscribers"}),"\n",(0,s.jsx)(n.li,{children:"Data streams continuously or periodically"}),"\n",(0,s.jsx)(n.li,{children:"No guarantee of message receipt"}),"\n",(0,s.jsx)(n.li,{children:"Fire-and-forget model"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example Implementation:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Publisher\r\nfrom std_msgs.msg import Float32\r\npublisher = node.create_publisher(Float32, 'temperature', 10)\r\n\r\n# Subscriber\r\ndef temp_callback(msg):\r\n    print(f\"Temperature: {msg.data}\")\r\nsubscription = node.create_subscription(Float32, 'temperature', temp_callback, 10)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"When to Use Topics:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sensor data streams (camera, LIDAR, IMU)"}),"\n",(0,s.jsx)(n.li,{children:"Robot state publishing (joint states, odometry)"}),"\n",(0,s.jsx)(n.li,{children:"Continuous status updates"}),"\n",(0,s.jsx)(n.li,{children:"Broadcasting information to multiple nodes"}),"\n",(0,s.jsx)(n.li,{children:"Real-time data where missed messages are acceptable"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-service-pattern",children:"2. Service Pattern"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Characteristics:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Synchronous request/reply communication"}),"\n",(0,s.jsx)(n.li,{children:"One client, one server"}),"\n",(0,s.jsx)(n.li,{children:"Guaranteed response"}),"\n",(0,s.jsx)(n.li,{children:"Short-lived operations"}),"\n",(0,s.jsx)(n.li,{children:"Blocking call semantics"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example Implementation:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Server\r\nfrom example_interfaces.srv import AddTwoInts\r\ndef add_callback(request, response):\r\n    response.sum = request.a + request.b\r\n    return response\r\nservice = node.create_service(AddTwoInts, 'add_two_ints', add_callback)\r\n\r\n# Client\r\nfrom example_interfaces.srv import AddTwoInts\r\nclient = node.create_client(AddTwoInts, 'add_two_ints')\r\nrequest = AddTwoInts.Request()\r\nrequest.a = 2\r\nrequest.b = 3\r\nfuture = client.call_async(request)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"When to Use Services:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Configuration changes"}),"\n",(0,s.jsx)(n.li,{children:"Data queries that require immediate response"}),"\n",(0,s.jsx)(n.li,{children:"Validation requests"}),"\n",(0,s.jsx)(n.li,{children:"One-time processing tasks"}),"\n",(0,s.jsx)(n.li,{children:"Calibration requests"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-action-pattern",children:"3. Action Pattern"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Characteristics:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Goal-oriented communication"}),"\n",(0,s.jsx)(n.li,{children:"Long-running operations"}),"\n",(0,s.jsx)(n.li,{children:"Feedback during execution"}),"\n",(0,s.jsx)(n.li,{children:"Cancelable operations"}),"\n",(0,s.jsx)(n.li,{children:"Success/failure results"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example Implementation:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Server\r\nfrom example_interfaces.action import Fibonacci\r\ndef execute_fibonacci(goal_handle):\r\n    feedback_msg = Fibonacci.Feedback()\r\n    result = Fibonacci.Result()\r\n    # Implementation with feedback and cancellation checks\r\n    goal_handle.succeed()\r\n    return result\r\naction_server = ActionServer(node, Fibonacci, 'fibonacci', execute_callback=execute_fibonacci)\r\n\r\n# Client\r\nfrom example_interfaces.action import Fibonacci\r\naction_client = ActionClient(node, Fibonacci, 'fibonacci')\r\ngoal_msg = Fibonacci.Goal()\r\ngoal_msg.order = 10\r\nfuture = action_client.send_goal_async(goal_msg)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"When to Use Actions:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Navigation to a goal"}),"\n",(0,s.jsx)(n.li,{children:"Long-running processing tasks"}),"\n",(0,s.jsx)(n.li,{children:"Tasks that provide progress feedback"}),"\n",(0,s.jsx)(n.li,{children:"Operations that might need to be canceled"}),"\n",(0,s.jsx)(n.li,{children:"Complex robot maneuvers"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"choosing-the-right-pattern-decision-matrix",children:"Choosing the Right Pattern: Decision Matrix"}),"\n",(0,s.jsx)(n.h3,{id:"decision-tree-for-communication-pattern-selection",children:"Decision Tree for Communication Pattern Selection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"START: Need to communicate?\r\n\u2502\r\n\u251c\u2500 Need immediate response? \u2500\u2500\u2510\r\n\u2502                              \u2502\r\n\u251c\u2500 YES \u2500\u2500\u2510                    \u2502\r\n\u2502         \u2502                    \u2502\r\n\u2502         \u251c\u2500 Short operation? \u2500\u2524\r\n\u2502         \u2502                   \u2502\r\n\u2502         \u251c\u2500 YES \u2500 Service    \u2502\r\n\u2502         \u2502                   \u2502\r\n\u2502         \u2514\u2500 NO \u2500\u2500\u2510           \u2502\r\n\u2502                  \u2502           \u2502\r\n\u2502                  \u251c\u2500 Cancelable? \u2500\u2500\u2510\r\n\u2502                  \u2502                \u2502\r\n\u2502                  \u251c\u2500 YES \u2500 Action \u2502\r\n\u2502                  \u2502                \u2502\r\n\u2502                  \u2514\u2500 NO \u2500 Service \u2502\r\n\u2502                                  \u2502\r\n\u2514\u2500 NO \u2500\u2500\u2510                         \u2502\r\n         \u2502                         \u2502\r\n         \u251c\u2500 Continuous stream? \u2500\u2500\u2500\u2500\u2524\r\n         \u2502                        \u2502\r\n         \u251c\u2500 YES \u2500 Topic          \u2502\r\n         \u2502                        \u2502\r\n         \u2514\u2500 NO \u2500\u2500\u2510               \u2502\r\n                  \u2502               \u2502\r\n                  \u251c\u2500 Long operation? \u2500\u2500\u2510\r\n                  \u2502                    \u2502\r\n                  \u251c\u2500 YES \u2500\u2500\u2510          \u2502\r\n                  \u2502         \u2502          \u2502\r\n                  \u2502         \u251c\u2500 Cancelable? \u2500\u2500\u2510\r\n                  \u2502         \u2502                \u2502\r\n                  \u2502         \u251c\u2500 YES \u2500 Action \u2502\r\n                  \u2502         \u2502                \u2502\r\n                  \u2502         \u2514\u2500 NO \u2500 Service \u2502\r\n                  \u2502                          \u2502\r\n                  \u2514\u2500 NO \u2500\u2500\u2510                 \u2502\r\n                           \u2502                 \u2502\r\n                           \u2514\u2500 Short \u2500 Topic \u2502\r\n                                         \u2502\r\n                                         \u2514\u2500 Need feedback? \u2500\u2500\u2510\r\n                                                                 \u2502\r\n                                                                 \u251c\u2500 YES \u2500 Action\r\n                                                                 \u2502\r\n                                                                 \u2514\u2500 NO \u2500 Service\n"})}),"\n",(0,s.jsx)(n.h2,{id:"practical-examples-and-use-cases",children:"Practical Examples and Use Cases"}),"\n",(0,s.jsx)(n.h3,{id:"sensor-data-management",children:"Sensor Data Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Topics for continuous sensor data\r\nclass SensorPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('sensor_publisher')\r\n        \r\n        # Multiple sensors publishing different data streams\r\n        self.laser_pub = self.create_publisher(LaserScan, 'scan', 10)\r\n        self.imu_pub = self.create_publisher(Imu, 'imu/data', 10)\r\n        self.odom_pub = self.create_publisher(Odometry, 'odom', 10)\r\n        \r\n        # Timer to publish sensor data periodically\r\n        self.timer = self.create_timer(0.1, self.publish_sensor_data)\r\n\r\n# This is appropriate because:\r\n# - Sensor data is continuous\r\n# - Multiple subscribers might need the data\r\n# - Slight delays are acceptable\r\n# - Some data loss might be acceptable for real-time performance\n"})}),"\n",(0,s.jsx)(n.h3,{id:"robot-configuration-system",children:"Robot Configuration System"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Service for robot configuration\r\nclass RobotConfigService(Node):\r\n    def __init__(self):\r\n        super().__init__('robot_config_service')\r\n        self.config_service = self.create_service(\r\n            SetParameters, 'set_robot_config', self.set_config_callback)\r\n    \r\n    def set_config_callback(self, request, response):\r\n        # Validate and apply configuration\r\n        try:\r\n            # Apply new configuration\r\n            self.apply_configuration(request.parameters)\r\n            response.success = True\r\n            response.message = \"Configuration applied successfully\"\r\n        except Exception as e:\r\n            response.success = False\r\n            response.message = f\"Failed to apply configuration: {str(e)}\"\r\n        \r\n        return response\r\n\r\n# This is appropriate because:\r\n# - Configuration requires immediate validation\r\n# - Client needs confirmation of success/failure\r\n# - Operation is relatively short\r\n# - Must be reliable (service QoS)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"navigation-system",children:"Navigation System"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Action for navigation\r\nclass NavigationActionServer(Node):\r\n    def __init__(self):\r\n        super().__init__('navigation_action_server')\r\n        self.nav_server = ActionServer(\r\n            self,\r\n            NavigateToPose,\r\n            'navigate_to_pose',\r\n            execute_callback=self.execute_navigation,\r\n            goal_callback=self.goal_callback,\r\n            cancel_callback=self.cancel_callback)\r\n    \r\n    def execute_navigation(self, goal_handle):\r\n        feedback_msg = NavigateToPose.Feedback()\r\n        result = NavigateToPose.Result()\r\n        \r\n        # Navigate with feedback and cancellation capability\r\n        for step in range(100):  # Simplified navigation\r\n            if goal_handle.is_cancel_requested:\r\n                goal_handle.canceled()\r\n                result.result_code = -1  # CANCELED\r\n                return result\r\n            \r\n            # Update navigation progress\r\n            feedback_msg.current_pose = self.get_current_pose()\r\n            feedback_msg.distance_remaining = self.calculate_distance_remaining()\r\n            \r\n            goal_handle.publish_feedback(feedback_msg)\r\n            \r\n            # Navigate to goal (simplified)\r\n            time.sleep(0.1)\r\n        \r\n        goal_handle.succeed()\r\n        result.result_code = 1  # SUCCESS\r\n        return result\r\n\r\n# This is appropriate because:\r\n# - Navigation is a long-running task\r\n# - Progress feedback is valuable\r\n# - Operation might need cancellation\r\n# - Result is important after completion\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,s.jsx)(n.h3,{id:"topics-performance",children:"Topics Performance"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"High throughput for data streaming"}),"\n",(0,s.jsx)(n.li,{children:"Low latency for real-time data"}),"\n",(0,s.jsx)(n.li,{children:"Multiple subscribers without server load increase"}),"\n",(0,s.jsx)(n.li,{children:"Decoupled sender/receiver timing"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Disadvantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No acknowledgment of delivery"}),"\n",(0,s.jsx)(n.li,{children:"Potential for high network usage"}),"\n",(0,s.jsx)(n.li,{children:"Memory usage for message queueing"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Optimized topic publishing\r\nclass OptimizedSensorPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('optimized_sensor_publisher')\r\n        \r\n        # Use appropriate QoS for different data types\r\n        self.hazardous_qos = QoSProfile(\r\n            depth=1,\r\n            reliability=ReliabilityPolicy.RELIABLE,\r\n            durability=DurabilityPolicy.VOLATILE\r\n        )\r\n        \r\n        self.debug_qos = QoSProfile(\r\n            depth=1,  # Limit buffer to save memory\r\n            reliability=ReliabilityPolicy.BEST_EFFORT,\r\n            durability=DurabilityPolicy.VOLATILE\r\n        )\r\n        \r\n        self.critical_pub = self.create_publisher(CriticalData, 'critical', self.hazardous_qos)\r\n        self.debug_pub = self.create_publisher(DebugData, 'debug', self.debug_qos)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"services-performance",children:"Services Performance"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Guaranteed request/reply delivery"}),"\n",(0,s.jsx)(n.li,{children:"Synchronous processing guarantees"}),"\n",(0,s.jsx)(n.li,{children:"Simple request/response logic"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Disadvantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Blocking client execution"}),"\n",(0,s.jsx)(n.li,{children:"Limited to one-to-one communication"}),"\n",(0,s.jsx)(n.li,{children:"Potential for server bottlenecks"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Optimized service with timeout handling\r\nclass OptimizedServiceClient(Node):\r\n    def __init__(self):\r\n        super().__init__('optimized_service_client')\r\n        self.client = self.create_client(ParameterService, 'set_parameter')\r\n    \r\n    def call_service_with_timeout(self, req, timeout=5.0):\r\n        # Check if service is available\r\n        if not self.client.wait_for_service(timeout_sec=timeout):\r\n            self.get_logger().error('Service not available')\r\n            return None\r\n        \r\n        # Make asynchronous call to avoid blocking\r\n        future = self.client.call_async(req)\r\n        \r\n        # Wait for result with timeout\r\n        rclpy.spin_until_future_complete(self, future, timeout_sec=timeout)\r\n        \r\n        if future.done():\r\n            return future.result()\r\n        else:\r\n            self.get_logger().error('Service call timed out')\r\n            return None\n"})}),"\n",(0,s.jsx)(n.h3,{id:"actions-performance",children:"Actions Performance"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Advantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Progress feedback during execution"}),"\n",(0,s.jsx)(n.li,{children:"Cancellation capability"}),"\n",(0,s.jsx)(n.li,{children:"Suitable for long-running tasks"}),"\n",(0,s.jsx)(n.li,{children:"Result delivery guaranteed"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Disadvantages:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"More complex implementation"}),"\n",(0,s.jsx)(n.li,{children:"Higher resource usage"}),"\n",(0,s.jsx)(n.li,{children:"More network overhead"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Optimized action with adaptive feedback\r\nclass OptimizedActionServer(Node):\r\n    def __init__(self):\r\n        super().__init__('optimized_action_server')\r\n        self.action_server = ActionServer(\r\n            self,\r\n            LongRunningTask,\r\n            'long_task',\r\n            execute_callback=self.execute_long_task,\r\n            goal_callback=self.goal_callback)\r\n    \r\n    def execute_long_task(self, goal_handle):\r\n        start_time = self.get_clock().now()\r\n        feedback_msg = LongRunningTask.Feedback()\r\n        result = LongRunningTask.Result()\r\n        \r\n        # Calculate appropriate feedback interval\r\n        total_steps = goal_handle.request.steps\r\n        feedback_interval = max(1, total_steps // 50)  # Max 50 feedback messages\r\n        \r\n        for i in range(total_steps):\r\n            if goal_handle.is_cancel_requested:\r\n                goal_handle.canceled()\r\n                result.completion_percentage = (i / total_steps) * 100.0\r\n                return result\r\n            \r\n            # Perform actual work\r\n            self.perform_work_step(i)\r\n            \r\n            # Send feedback at calculated interval\r\n            if i % feedback_interval == 0:\r\n                feedback_msg.progress = (i / total_steps) * 100.0\r\n                elapsed = (self.get_clock().now() - start_time).nanoseconds / 1e9\r\n                feedback_msg.estimated_time_remaining = \\\r\n                    (elapsed / (i + 1)) * (total_steps - i - 1)\r\n                \r\n                goal_handle.publish_feedback(feedback_msg)\r\n        \r\n        goal_handle.succeed()\r\n        result.completion_percentage = 100.0\r\n        return result\n"})}),"\n",(0,s.jsx)(n.h2,{id:"common-mistakes-and-anti-patterns",children:"Common Mistakes and Anti-patterns"}),"\n",(0,s.jsx)(n.h3,{id:"1-topic-anti-patterns",children:"1. Topic Anti-patterns"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# BAD: Using topics for configuration\r\npublisher.publish(ConfigurationRequest())  # No guarantee of response\r\n\r\n# GOOD: Use services for configuration\r\nfuture = config_client.call_async(config_request)\r\n\r\n# BAD: Publishing large messages too frequently\r\n# Large point clouds at 30Hz on a topic\r\n\r\n# GOOD: Use appropriate frequency and message size\r\n# Or use compression/decimation for large data\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-service-anti-patterns",children:"2. Service Anti-patterns"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# BAD: Using services for sensor data streaming\r\n# This would block the server for each request\r\n\r\n# GOOD: Use topics for continuous data\r\nsensor_publisher.publish(sensor_data)\r\n\r\n# BAD: Using services for long-running tasks\r\n# Client blocks potentially for minutes\r\n\r\n# GOOD: Use actions for long tasks\r\nnavigation_goal = NavigateToPose.Goal()\r\naction_client.send_goal(navigation_goal)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-action-anti-patterns",children:"3. Action Anti-patterns"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# BAD: Using actions for simple queries\r\n# Overly complex for simple operations\r\n\r\n# GOOD: Use services for simple queries\r\nresponse = simple_query_service.call_async(query_request)\r\n\r\n# BAD: Sending goals that should be continuous state\r\n# Like current robot position (use topics instead)\r\n\r\n# GOOD: Use actions for goal-oriented tasks\r\naction_client.send_goal(navigate_goal)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"migration-between-patterns",children:"Migration Between Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"when-to-change-patterns",children:"When to Change Patterns"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Example 1: Topic to Service (when you need guarantees)\r\n# Before: Publishing configuration\r\nconfig_publisher.publish(new_config)\r\n\r\n# After: Using service for guaranteed delivery\r\nfuture = config_service.call_async(config_request)\r\n\r\n# Example 2: Service to Action (when operation becomes long-running)\r\n# Before: Service that blocks for long time\r\nresponse = navigation_service.call_async(nav_request)  # Blocks for minutes\r\n\r\n# After: Using action for progress feedback\r\naction_client.send_goal(nav_action_goal)  # Non-blocking, with feedback\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices-summary",children:"Best Practices Summary"}),"\n",(0,s.jsx)(n.h3,{id:"pattern-selection-guidelines",children:"Pattern Selection Guidelines"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use Topics When:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Broadcasting information to multiple subscribers"}),"\n",(0,s.jsx)(n.li,{children:"Streaming continuous data (sensors, states)"}),"\n",(0,s.jsx)(n.li,{children:"Real-time performance is critical"}),"\n",(0,s.jsx)(n.li,{children:"Some message loss is acceptable"}),"\n",(0,s.jsx)(n.li,{children:"No response is needed"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use Services When:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Need guaranteed request/reply communication"}),"\n",(0,s.jsx)(n.li,{children:"Operation is relatively short (< 1s typical)"}),"\n",(0,s.jsx)(n.li,{children:"Client must wait for result"}),"\n",(0,s.jsx)(n.li,{children:"Performing configuration changes"}),"\n",(0,s.jsx)(n.li,{children:"Making simple queries"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use Actions When:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Operation is long-running (> 1s typical)"}),"\n",(0,s.jsx)(n.li,{children:"Progress feedback is valuable"}),"\n",(0,s.jsx)(n.li,{children:"Operation might need cancellation"}),"\n",(0,s.jsx)(n.li,{children:"Result is important but client doesn't block"}),"\n",(0,s.jsx)(n.li,{children:"Task has intermediate states"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"architecture-considerations",children:"Architecture Considerations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# Example: Complete system using all patterns appropriately\r\nclass RoboticSystem(Node):\r\n    def __init__(self):\r\n        super().__init__('robotic_system')\r\n        \r\n        # Topics: Continuous sensor/state information\r\n        self.odom_sub = self.create_subscription(Odometry, 'odom', self.odom_callback, 10)\r\n        self.laser_pub = self.create_publisher(LaserScan, 'scan', 10)\r\n        self.status_pub = self.create_publisher(Status, 'robot_status', 10)\r\n        \r\n        # Services: Configuration and immediate queries\r\n        self.config_srv = self.create_service(SetConfig, 'set_config', self.config_callback)\r\n        self.query_srv = self.create_service(GetState, 'get_state', self.state_callback)\r\n        \r\n        # Actions: Long-running tasks\r\n        self.nav_server = ActionServer(self, NavigateToPose, 'navigate', self.nav_execute)\r\n        self.arm_server = ActionServer(self, MoveArm, 'move_arm', self.arm_execute)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"This submodule provided a comprehensive comparison of the three main communication patterns in ROS 2:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Topics"}),": Best for continuous data streaming and broadcasting"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Services"}),": Best for request/reply operations requiring immediate responses"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Actions"}),": Best for long-running, goal-oriented tasks with feedback"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The choice between patterns depends on specific requirements like response time, data continuity, feedback needs, and cancellation capabilities. The next submodule will provide practical exercises to apply these concepts in real-world scenarios."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);