"use strict";(globalThis.webpackChunkphysical_ai_platform_frontend=globalThis.webpackChunkphysical_ai_platform_frontend||[]).push([[4605],{1351:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"module-1/week-2-nodes-topics/2-1-understanding-nodes","title":"2.1: Understanding ROS 2 Nodes","description":"Overview","source":"@site/docs/module-1/week-2-nodes-topics/2-1-understanding-nodes.md","sourceDirName":"module-1/week-2-nodes-topics","slug":"/module-1/week-2-nodes-topics/2-1-understanding-nodes","permalink":"/docs/module-1/week-2-nodes-topics/2-1-understanding-nodes","draft":false,"unlisted":false,"editUrl":"https://github.com/noor-ana/physical-ai-platform/tree/main/docs/module-1/week-2-nodes-topics/2-1-understanding-nodes.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"difficulty":"beginner"},"sidebar":"tutorialSidebar","previous":{"title":"1.4: Practical Exercises - ROS 2 Fundamentals","permalink":"/docs/module-1/week-1-introduction/1-4-practical-exercises"},"next":{"title":"2.2: Working with ROS 2 Topics","permalink":"/docs/module-1/week-2-nodes-topics/2-2-working-with-topics"}}');var s=i(4848),o=i(8453);const a={sidebar_position:1,difficulty:"beginner"},t="2.1: Understanding ROS 2 Nodes",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"What is a Node?",id:"what-is-a-node",level:2},{value:"Key Characteristics of Nodes:",id:"key-characteristics-of-nodes",level:3},{value:"Creating Nodes in Python",id:"creating-nodes-in-python",level:2},{value:"Basic Node Structure",id:"basic-node-structure",level:3},{value:"Node Naming and Uniqueness",id:"node-naming-and-uniqueness",level:3},{value:"Creating Nodes in C++",id:"creating-nodes-in-c",level:2},{value:"Node Parameters",id:"node-parameters",level:2},{value:"Setting Parameters at Runtime",id:"setting-parameters-at-runtime",level:3},{value:"Node Lifecycle Management",id:"node-lifecycle-management",level:2},{value:"Node Composition",id:"node-composition",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Summary",id:"summary",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"21-understanding-ros-2-nodes",children:"2.1: Understanding ROS 2 Nodes"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"This submodule provides an in-depth understanding of ROS 2 nodes, which are the fundamental building blocks of any ROS application. We'll explore how to create, manage, and organize nodes effectively."}),"\n",(0,s.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this submodule, you will:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Understand what a node is and its role in ROS 2"}),"\n",(0,s.jsx)(n.li,{children:"Create nodes in both Python and C++"}),"\n",(0,s.jsx)(n.li,{children:"Implement proper node lifecycle management"}),"\n",(0,s.jsx)(n.li,{children:"Understand node parameters and configuration"}),"\n",(0,s.jsx)(n.li,{children:"Use node composition for efficient applications"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"what-is-a-node",children:"What is a Node?"}),"\n",(0,s.jsxs)(n.p,{children:["In ROS 2, a ",(0,s.jsx)(n.strong,{children:"node"})," is a process that performs computation. Nodes are the fundamental unit of computation in ROS 2 and are designed to be modular and reusable. Multiple nodes are usually combined together to form a complete ROS application."]}),"\n",(0,s.jsx)(n.h3,{id:"key-characteristics-of-nodes",children:"Key Characteristics of Nodes:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Modularity"}),": Nodes encapsulate specific functionality"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Communication"}),": Nodes communicate with each other using topics, services, and actions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Independence"}),": Nodes can be run independently"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configurability"}),": Nodes can be configured using parameters"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"creating-nodes-in-python",children:"Creating Nodes in Python"}),"\n",(0,s.jsx)(n.h3,{id:"basic-node-structure",children:"Basic Node Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass MyNode(Node):\n    def __init__(self):\n        super().__init__('my_node_name')\n        # Node initialization code goes here\n        self.get_logger().info('Node initialized')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = MyNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"node-naming-and-uniqueness",children:"Node Naming and Uniqueness"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 automatically handles node name conflicts by adding a numeric suffix if needed:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# If another node named 'my_node' exists,\n# this node will be renamed to something like 'my_node_1'\nnode = MyNode()  # Uses default name from class\nnode = MyNode(node_name='my_custom_name')  # Or specify custom name\n"})}),"\n",(0,s.jsx)(n.h2,{id:"creating-nodes-in-c",children:"Creating Nodes in C++"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'#include <rclcpp/rclcpp.hpp>\n\nclass MyNode : public rclcpp::Node\n{\npublic:\n    MyNode() : Node("my_node_name")\n    {\n        RCLCPP_INFO(this->get_logger(), "Node initialized");\n    }\n};\n\nint main(int argc, char * argv[])\n{\n    rclcpp::init(argc, argv);\n    rclcpp::spin(std::make_shared<MyNode>());\n    rclcpp::shutdown();\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"node-parameters",children:"Node Parameters"}),"\n",(0,s.jsx)(n.p,{children:"Nodes can accept parameters to configure their behavior:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\n\nclass ParameterNode(Node):\n    def __init__(self):\n        super().__init__('parameter_node')\n        \n        # Declare parameters with default values\n        self.declare_parameter('my_parameter', 'default_value')\n        self.declare_parameter('count_threshold', 10)\n        self.declare_parameter('frequency', 1.0)\n        \n        # Get parameter values\n        self.my_param = self.get_parameter('my_parameter').value\n        self.threshold = self.get_parameter('count_threshold').value\n        self.freq = self.get_parameter('frequency').value\n        \n        self.counter = 0\n\ndef main(args=None):\n    rclpy.init(args=args)\n    \n    # Pass parameters when creating node\n    node = ParameterNode()\n    rclpy.spin(node)\n    node.destroy_node()\n    rclpy.shutdown()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"setting-parameters-at-runtime",children:"Setting Parameters at Runtime"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Command line\nros2 run my_package my_node --ros-args -p my_parameter:=new_value -p frequency:=2.0\n\n# In launch file\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        Node(\n            package='my_package',\n            executable='my_node',\n            parameters=[\n                {'my_parameter': 'new_value'},\n                {'frequency': 2.0}\n            ]\n        )\n    ])\n"})}),"\n",(0,s.jsx)(n.h2,{id:"node-lifecycle-management",children:"Node Lifecycle Management"}),"\n",(0,s.jsx)(n.p,{children:"ROS 2 provides a lifecycle system for more complex node management:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.lifecycle import LifecycleNode, LifecycleState, TransitionCallbackReturn\nfrom rclpy.lifecycle import Node as ROS2Node\n\nclass LifecycleManagedNode(LifecycleNode):\n    def __init__(self):\n        super().__init__('lifecycle_node')\n        self.get_logger().info('Lifecycle node created')\n\n    def on_configure(self, state: LifecycleState) -> TransitionCallbackReturn:\n        self.get_logger().info('Configuring node')\n        # Setup publishers, subscribers, etc.\n        return TransitionCallbackReturn.SUCCESS\n\n    def on_activate(self, state: LifecycleState) -> TransitionCallbackReturn:\n        self.get_logger().info('Activating node')\n        # Activate publishers, subscribers, etc.\n        return TransitionCallbackReturn.SUCCESS\n\n    def on_deactivate(self, state: LifecycleState) -> TransitionCallbackReturn:\n        self.get_logger().info('Deactivating node')\n        # Deactivate publishers, subscribers, etc.\n        return TransitionCallbackReturn.SUCCESS\n\n    def on_cleanup(self, state: LifecycleState) -> TransitionCallbackReturn:\n        self.get_logger().info('Cleaning up node')\n        # Clean up resources\n        return TransitionCallbackReturn.SUCCESS\n"})}),"\n",(0,s.jsx)(n.h2,{id:"node-composition",children:"Node Composition"}),"\n",(0,s.jsx)(n.p,{children:"Node composition allows multiple nodes to run within the same process:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom rclpy.executors import SingleThreadedExecutor\nfrom rclpy.callback_groups import MutuallyExclusiveCallbackGroup\nfrom std_msgs.msg import String\n\nclass PublisherNode(Node):\n    def __init__(self):\n        super().__init__('publisher_node')\n        self.publisher = self.create_publisher(String, 'composed_topic', 10)\n        self.timer = self.create_timer(1.0, self.timer_callback)\n        self.counter = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Composed message {self.counter}'\n        self.publisher.publish(msg)\n        self.counter += 1\n\nclass SubscriberNode(Node):\n    def __init__(self):\n        super().__init__('subscriber_node')\n        self.subscription = self.create_subscription(\n            String,\n            'composed_topic',\n            self.subscriber_callback,\n            10\n        )\n\n    def subscriber_callback(self, msg):\n        self.get_logger().info(f'Received: {msg.data}')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    \n    # Create nodes\n    pub_node = PublisherNode()\n    sub_node = SubscriberNode()\n    \n    # Create executor and add nodes\n    executor = SingleThreadedExecutor()\n    executor.add_node(pub_node)\n    executor.add_node(sub_node)\n    \n    try:\n        executor.spin()\n    finally:\n        executor.shutdown()\n        pub_node.destroy_node()\n        sub_node.destroy_node()\n        rclpy.shutdown()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Node Design"}),": Keep nodes focused on a single responsibility"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resource Management"}),": Always clean up resources in the destroy callback"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error Handling"}),": Implement proper error handling and logging"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Parameters"}),": Use parameters for configurable aspects of your node"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Documentation"}),": Document your node's purpose, parameters, and interfaces"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"This submodule covered the fundamentals of ROS 2 nodes including creation, parameter handling, lifecycle management, and composition. In the next submodule, we'll dive into topics, which are the primary communication mechanism between nodes."})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>t});var r=i(6540);const s={},o=r.createContext(s);function a(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);