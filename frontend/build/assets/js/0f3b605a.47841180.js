"use strict";(globalThis.webpackChunkphysical_ai_platform_frontend=globalThis.webpackChunkphysical_ai_platform_frontend||[]).push([[2278],{8150:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>l,contentTitle:()=>t,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-2/week-1-introduction/2-3-basic-simulation-concepts","title":"2.3: Basic Simulation Concepts and World Building","description":"Overview","source":"@site/docs/module-2/week-1-introduction/2-3-basic-simulation-concepts.md","sourceDirName":"module-2/week-1-introduction","slug":"/module-2/week-1-introduction/2-3-basic-simulation-concepts","permalink":"/docs/module-2/week-1-introduction/2-3-basic-simulation-concepts","draft":false,"unlisted":false,"editUrl":"https://github.com/noor-ana/physical-ai-platform/tree/main/docs/module-2/week-1-introduction/2-3-basic-simulation-concepts.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"difficulty":"intermediate"},"sidebar":"tutorialSidebar","previous":{"title":"2.2: Gazebo Installation and Setup for ROS 2","permalink":"/docs/module-2/week-1-introduction/2-2-gazebo-installation-setup"},"next":{"title":"2.4: Simulation Practical Exercises","permalink":"/docs/module-2/week-1-introduction/2-4-simulation-practical-exercises"}}');var o=e(4848),s=e(8453);const a={sidebar_position:3,difficulty:"intermediate"},t="2.3: Basic Simulation Concepts and World Building",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"SDF (Simulation Description Format) Overview",id:"sdf-simulation-description-format-overview",level:2},{value:"What is SDF?",id:"what-is-sdf",level:3},{value:"Basic SDF Structure",id:"basic-sdf-structure",level:3},{value:"Creating Custom Worlds",id:"creating-custom-worlds",level:2},{value:"Basic World Structure",id:"basic-world-structure",level:3},{value:"Advanced World Features",id:"advanced-world-features",level:3},{value:"Robot Model Integration",id:"robot-model-integration",level:2},{value:"Creating a Simple Robot Model",id:"creating-a-simple-robot-model",level:3},{value:"Model Configuration File",id:"model-configuration-file",level:3},{value:"Spawning Robots Programmatically",id:"spawning-robots-programmatically",level:2},{value:"ROS 2 Node for Robot Spawning",id:"ros-2-node-for-robot-spawning",level:3},{value:"Working with Sensors in Gazebo",id:"working-with-sensors-in-gazebo",level:2},{value:"Robot Model with Sensors",id:"robot-model-with-sensors",level:3},{value:"Launch Files for Simulation",id:"launch-files-for-simulation",level:2},{value:"Basic Simulation Launch File",id:"basic-simulation-launch-file",level:3},{value:"Advanced Simulation Launch File",id:"advanced-simulation-launch-file",level:3},{value:"Physics Configuration",id:"physics-configuration",level:2},{value:"Understanding Physics Parameters",id:"understanding-physics-parameters",level:3},{value:"Performance vs. Accuracy Trade-offs",id:"performance-vs-accuracy-trade-offs",level:3},{value:"Summary",id:"summary",level:2}];function d(n){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"23-basic-simulation-concepts-and-world-building",children:"2.3: Basic Simulation Concepts and World Building"})}),"\n",(0,o.jsx)(r.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(r.p,{children:"This submodule introduces fundamental concepts of robot simulation in Gazebo, including world building, model spawning, and basic simulation control. We'll explore the SDF (Simulation Description Format) and learn how to create and customize simulation environments."}),"\n",(0,o.jsx)(r.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsx)(r.p,{children:"By the end of this submodule, you will:"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Understand the SDF (Simulation Description Format) structure"}),"\n",(0,o.jsx)(r.li,{children:"Create and customize Gazebo worlds with models and objects"}),"\n",(0,o.jsx)(r.li,{children:"Spawn and control robots in simulation"}),"\n",(0,o.jsx)(r.li,{children:"Work with basic sensors in simulated environments"}),"\n",(0,o.jsx)(r.li,{children:"Understand simulation parameters and physics settings"}),"\n",(0,o.jsx)(r.li,{children:"Create launch files to automate simulation workflows"}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"sdf-simulation-description-format-overview",children:"SDF (Simulation Description Format) Overview"}),"\n",(0,o.jsx)(r.h3,{id:"what-is-sdf",children:"What is SDF?"}),"\n",(0,o.jsx)(r.p,{children:"SDF (Simulation Description Format) is the XML-based format used by Gazebo to describe simulation environments. It defines:"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"Worlds (environments)"}),"\n",(0,o.jsx)(r.li,{children:"Models (robots, objects)"}),"\n",(0,o.jsx)(r.li,{children:"Physics settings"}),"\n",(0,o.jsx)(r.li,{children:"Lights"}),"\n",(0,o.jsx)(r.li,{children:"Plugins"}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"basic-sdf-structure",children:"Basic SDF Structure"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0" ?>\r\n<sdf version="1.7">\r\n  <world name="example_world">\r\n    <include>\r\n      <uri>model://ground_plane</uri>\r\n    </include>\r\n    \r\n    <include>\r\n      <uri>model://sun</uri>\r\n    </include>\r\n    \r\n    <model name="my_robot">\r\n      <pose>0 0 0.5 0 0 0</pose>\r\n      <link name="chassis">\r\n        <pose>0 0 0.1 0 0 0</pose>\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>1.0 0.5 0.2</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>1.0 0.5 0.2</size>\r\n            </box>\r\n          </geometry>\r\n        </visual>\r\n        <inertial>\r\n          <mass>10</mass>\r\n          <inertia>\r\n            <ixx>0.4</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>1.25</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>1.25</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n  </world>\r\n</sdf>\n'})}),"\n",(0,o.jsx)(r.h2,{id:"creating-custom-worlds",children:"Creating Custom Worlds"}),"\n",(0,o.jsx)(r.h3,{id:"basic-world-structure",children:"Basic World Structure"}),"\n",(0,o.jsxs)(r.p,{children:["Let's build a simple world file step by step. Create ",(0,o.jsx)(r.code,{children:"my_robot_gazebo/worlds/basic_world.sdf"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0" ?>\r\n<sdf version="1.7">\r\n  <world name="basic_world">\r\n    \x3c!-- Include standard models --\x3e\r\n    <include>\r\n      <uri>model://ground_plane</uri>\r\n    </include>\r\n    \r\n    <include>\r\n      <uri>model://sun</uri>\r\n    </include>\r\n    \r\n    \x3c!-- Configure physics --\x3e\r\n    <physics name="ode" default="0" type="ode">\r\n      <gravity>0 0 -9.8</gravity>\r\n      <ode>\r\n        <solver>\r\n          <type>quick</type>\r\n          <iters>10</iters>\r\n          <sor>1.3</sor>\r\n        </solver>\r\n        <constraints>\r\n          <cfm>0.0</cfm>\r\n          <erp>0.2</erp>\r\n          <contact_max_correcting_vel>100.0</contact_max_correcting_vel>\r\n          <contact_surface_layer>0.001</contact_surface_layer>\r\n        </constraints>\r\n      </ode>\r\n    </physics>\r\n    \r\n    \x3c!-- Add a simple wall --\x3e\r\n    <model name="wall">\r\n      <static>true</static>\r\n      <pose>2 0 1 0 0 0</pose>\r\n      <link name="wall_link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 4.0 2.0</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 4.0 2.0</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.8 0.8 0.8 1</ambient>\r\n            <diffuse>0.8 0.8 0.8 1</diffuse>\r\n            <specular>0.8 0.8 0.8 1</specular>\r\n          </material>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n    \r\n    \x3c!-- Add another wall perpendicular to the first --\x3e\r\n    <model name="wall2">\r\n      <static>true</static>\r\n      <pose>-1 2 1 0 0 1.57</pose>\r\n      <link name="wall2_link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 4.0 2.0</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.1 4.0 2.0</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.8 0.8 0.8 1</ambient>\r\n            <diffuse>0.8 0.8 0.8 1</diffuse>\r\n            <specular>0.8 0.8 0.8 1</specular>\r\n          </material>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n    \r\n    \x3c!-- Add a box that can be moved --\x3e\r\n    <model name="movable_box">\r\n      <pose>-1 0 0.5 0 0 0</pose>\r\n      <link name="box_link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.5 0.5 0.5</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.5 0.5 0.5</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.5 0.5 1.0 1</ambient>\r\n            <diffuse>0.5 0.5 1.0 1</diffuse>\r\n            <specular>0.8 0.8 0.8 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>2</mass>\r\n          <inertia>\r\n            <ixx>0.083</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.083</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.083</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n  </world>\r\n</sdf>\n'})}),"\n",(0,o.jsx)(r.h3,{id:"advanced-world-features",children:"Advanced World Features"}),"\n",(0,o.jsxs)(r.p,{children:["Create a more advanced world file at ",(0,o.jsx)(r.code,{children:"my_robot_gazebo/worlds/advanced_world.sdf"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0" ?>\r\n<sdf version="1.7">\r\n  <world name="advanced_world">\r\n    \x3c!-- Include standard models --\x3e\r\n    <include>\r\n      <uri>model://ground_plane</uri>\r\n    </include>\r\n    \r\n    <include>\r\n      <uri>model://sun</uri>\r\n    </include>\r\n    \r\n    \x3c!-- Configure physics with more detailed parameters --\x3e\r\n    <physics name="ode" default="0" type="ode">\r\n      <gravity>0 0 -9.8</gravity>\r\n      <ode>\r\n        <solver>\r\n          <type>quick</type>\r\n          <iters>100</iters>\r\n          <sor>1.3</sor>\r\n        </solver>\r\n        <constraints>\r\n          <cfm>0.0</cfm>\r\n          <erp>0.2</erp>\r\n          <contact_max_correcting_vel>100.0</contact_max_correcting_vel>\r\n          <contact_surface_layer>0.001</contact_surface_layer>\r\n        </constraints>\r\n      </ode>\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1</real_time_factor>\r\n      <real_time_update_rate>1000</real_time_update_rate>\r\n    </physics>\r\n    \r\n    \x3c!-- Define plugins for ROS 2 integration --\x3e\r\n    <plugin name="gazebo_ros_init" filename="libgazebo_ros_init.so">\r\n      <ros>\r\n        <namespace>/gazebo</namespace>\r\n      </ros>\r\n    </plugin>\r\n    \r\n    \x3c!-- Add a custom light --\x3e\r\n    <light name="custom_light" type="point">\r\n      <pose>3 3 8 0 0 0</pose>\r\n      <diffuse>0.8 0.8 0.8 1</diffuse>\r\n      <specular>0.8 0.8 0.8 1</specular>\r\n      <attenuation>\r\n        <range>10</range>\r\n        <constant>0.5</constant>\r\n        <linear>0.1</linear>\r\n        <quadratic>0.01</quadratic>\r\n      </attenuation>\r\n      <cast_shadows>true</cast_shadows>\r\n    </light>\r\n    \r\n    \x3c!-- Add a cuboid obstacle --\x3e\r\n    <model name="obstacle_1">\r\n      <static>false</static>\r\n      <pose>1 1 0.2 0 0 0</pose>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <box>\r\n              <size>0.4 0.4 0.4</size>\r\n            </box>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <box>\r\n              <size>0.4 0.4 0.4</size>\r\n            </box>\r\n          </geometry>\r\n          <material>\r\n            <ambient>1.0 0.0 0.0 1</ambient>\r\n            <diffuse>1.0 0.0 0.0 1</diffuse>\r\n            <specular>0.8 0.2 0.2 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>1</mass>\r\n          <inertia>\r\n            <ixx>0.0133</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.0133</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.0133</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n    \r\n    \x3c!-- Add a cylinder obstacle --\x3e\r\n    <model name="cylinder_obstacle">\r\n      <static>false</static>\r\n      <pose>-1 -1 0.5 0 0 0</pose>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <cylinder>\r\n              <radius>0.2</radius>\r\n              <length>1.0</length>\r\n            </cylinder>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <cylinder>\r\n              <radius>0.2</radius>\r\n              <length>1.0</length>\r\n            </cylinder>\r\n          </geometry>\r\n          <material>\r\n            <ambient>0.0 1.0 0.0 1</ambient>\r\n            <diffuse>0.0 1.0 0.0 1</diffuse>\r\n            <specular>0.2 0.8 0.2 1</specular>\r\n          </material>\r\n        </visual>\r\n        <inertial>\r\n          <mass>2</mass>\r\n          <inertia>\r\n            <ixx>0.15</ixx>\r\n            <ixy>0</ixy>\r\n            <ixz>0</ixz>\r\n            <iyy>0.15</iyy>\r\n            <iyz>0</iyz>\r\n            <izz>0.1</izz>\r\n          </inertia>\r\n        </inertial>\r\n      </link>\r\n    </model>\r\n    \r\n    \x3c!-- Add a simple ramp --\x3e\r\n    <model name="ramp">\r\n      <static>true</static>\r\n      <pose>2 -2 0 0 0.3 0</pose>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <mesh>\r\n              <uri>file://meshes/ramp.dae</uri>\r\n            </mesh>\r\n          </geometry>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <mesh>\r\n              <uri>file://meshes/ramp.dae</uri>\r\n            </mesh>\r\n          </geometry>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n  </world>\r\n</sdf>\n'})}),"\n",(0,o.jsx)(r.h2,{id:"robot-model-integration",children:"Robot Model Integration"}),"\n",(0,o.jsx)(r.h3,{id:"creating-a-simple-robot-model",children:"Creating a Simple Robot Model"}),"\n",(0,o.jsxs)(r.p,{children:["Create ",(0,o.jsx)(r.code,{children:"my_robot_gazebo/models/simple_robot/model.sdf"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0" ?>\r\n<sdf version="1.7">\r\n  <model name="simple_robot">\r\n    <pose>0 0 0.5 0 0 0</pose>\r\n    \r\n    \x3c!-- Chassis --\x3e\r\n    <link name="chassis">\r\n      <pose>0 0 0.1 0 0 0</pose>\r\n      <collision name="collision">\r\n        <geometry>\r\n          <box>\r\n            <size>0.5 0.3 0.2</size>\r\n          </box>\r\n        </geometry>\r\n      </collision>\r\n      <visual name="visual">\r\n        <geometry>\r\n          <box>\r\n            <size>0.5 0.3 0.2</size>\r\n          </box>\r\n        </geometry>\r\n        <material>\r\n          <ambient>0.0 0.8 0.8 1</ambient>\r\n          <diffuse>0.0 0.8 0.8 1</diffuse>\r\n          <specular>0.8 0.8 0.8 1</specular>\r\n        </material>\r\n      </visual>\r\n      <inertial>\r\n        <mass>5</mass>\r\n        <inertia>\r\n          <ixx>0.1</ixx>\r\n          <ixy>0</ixy>\r\n          <ixz>0</ixz>\r\n          <iyy>0.2</iyy>\r\n          <iyz>0</iyz>\r\n          <izz>0.25</izz>\r\n        </inertia>\r\n      </inertial>\r\n    </link>\r\n    \r\n    \x3c!-- Left wheel --\x3e\r\n    <link name="left_wheel">\r\n      <collision name="collision">\r\n        <geometry>\r\n          <cylinder>\r\n            <radius>0.1</radius>\r\n            <length>0.05</length>\r\n          </cylinder>\r\n        </geometry>\r\n      </collision>\r\n      <visual name="visual">\r\n        <geometry>\r\n          <cylinder>\r\n            <radius>0.1</radius>\r\n            <length>0.05</length>\r\n          </cylinder>\r\n        </geometry>\r\n        <material>\r\n          <ambient>0.2 0.2 0.2 1</ambient>\r\n          <diffuse>0.2 0.2 0.2 1</diffuse>\r\n          <specular>0.8 0.8 0.8 1</specular>\r\n        </material>\r\n      </visual>\r\n      <inertial>\r\n        <mass>0.5</mass>\r\n        <inertia>\r\n          <ixx>0.001</ixx>\r\n          <ixy>0</ixy>\r\n          <ixz>0</ixz>\r\n          <iyy>0.001</iyy>\r\n          <iyz>0</iyz>\r\n          <izz>0.002</izz>\r\n        </inertia>\r\n      </inertial>\r\n    </link>\r\n    \r\n    \x3c!-- Right wheel --\x3e\r\n    <link name="right_wheel">\r\n      <collision name="collision">\r\n        <geometry>\r\n          <cylinder>\r\n            <radius>0.1</radius>\r\n            <length>0.05</length>\r\n          </cylinder>\r\n        </geometry>\r\n      </collision>\r\n      <visual name="visual">\r\n        <geometry>\r\n          <cylinder>\r\n            <radius>0.1</radius>\r\n            <length>0.05</length>\r\n          </cylinder>\r\n        </geometry>\r\n        <material>\r\n          <ambient>0.2 0.2 0.2 1</ambient>\r\n          <diffuse>0.2 0.2 0.2 1</diffuse>\r\n          <specular>0.8 0.8 0.8 1</specular>\r\n        </material>\r\n      </visual>\r\n      <inertial>\r\n        <mass>0.5</mass>\r\n        <inertia>\r\n          <ixx>0.001</ixx>\r\n          <ixy>0</ixy>\r\n          <ixz>0</ixz>\r\n          <iyy>0.001</iyy>\r\n          <iyz>0</iyz>\r\n          <izz>0.002</izz>\r\n        </inertia>\r\n      </inertial>\r\n    </link>\r\n    \r\n    \x3c!-- Joints connecting wheels to chassis --\x3e\r\n    <joint name="left_wheel_joint" type="continuous">\r\n      <parent>chassis</parent>\r\n      <child>left_wheel</child>\r\n      <pose>0.15 0.2 0 0 0 0</pose>\r\n      <axis>\r\n        <xyz>0 1 0</xyz>\r\n      </axis>\r\n    </joint>\r\n    \r\n    <joint name="right_wheel_joint" type="continuous">\r\n      <parent>chassis</parent>\r\n      <child>right_wheel</child>\r\n      <pose>0.15 -0.2 0 0 0 0</pose>\r\n      <axis>\r\n        <xyz>0 1 0</xyz>\r\n      </axis>\r\n    </joint>\r\n  </model>\r\n</sdf>\n'})}),"\n",(0,o.jsx)(r.h3,{id:"model-configuration-file",children:"Model Configuration File"}),"\n",(0,o.jsxs)(r.p,{children:["Create ",(0,o.jsx)(r.code,{children:"my_robot_gazebo/models/simple_robot/model.config"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<model>\r\n  <name>Simple Robot</name>\r\n  <version>1.0</version>\r\n  <sdf version="1.7">model.sdf</sdf>\r\n  \r\n  <author>\r\n    <name>Your Name</name>\r\n    <email>your.email@example.com</email>\r\n  </author>\r\n  \r\n  <description>\r\n    A simple robot model for simulation.\r\n  </description>\r\n</model>\n'})}),"\n",(0,o.jsx)(r.h2,{id:"spawning-robots-programmatically",children:"Spawning Robots Programmatically"}),"\n",(0,o.jsx)(r.h3,{id:"ros-2-node-for-robot-spawning",children:"ROS 2 Node for Robot Spawning"}),"\n",(0,o.jsxs)(r.p,{children:["Create ",(0,o.jsx)(r.code,{children:"my_robot_gazebo/my_robot_gazebo/spawn_robot.py"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:"#!/usr/bin/env python3\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom gazebo_msgs.srv import SpawnEntity\r\nfrom geometry_msgs.msg import Pose\r\nimport os\r\nfrom ament_index_python.packages import get_package_share_directory\r\n\r\nclass RobotSpawner(Node):\r\n    def __init__(self):\r\n        super().__init__('robot_spawner')\r\n        \r\n        # Create a service client for spawning entities\r\n        self.spawn_cli = self.create_client(SpawnEntity, '/spawn_entity')\r\n        \r\n        # Wait for the service to be available\r\n        while not self.spawn_cli.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info('Service /spawn_entity not available, waiting again...')\r\n        \r\n        self.spawn_robot()\r\n\r\n    def spawn_robot(self):\r\n        # Load the robot model from file\r\n        sdf_file_path = os.path.join(\r\n            get_package_share_directory('my_robot_gazebo'),\r\n            'models', 'simple_robot', 'model.sdf'\r\n        )\r\n        \r\n        with open(sdf_file_path, 'r') as sdf_file:\r\n            robot_model_xml = sdf_file.read()\r\n        \r\n        # Create the request\r\n        request = SpawnEntity.Request()\r\n        request.name = \"my_robot\"\r\n        request.xml = robot_model_xml\r\n        request.robot_namespace = \"\"\r\n        \r\n        # Set initial pose\r\n        initial_pose = Pose()\r\n        initial_pose.position.x = 0.0\r\n        initial_pose.position.y = 0.0\r\n        initial_pose.position.z = 0.5\r\n        initial_pose.orientation.x = 0.0\r\n        initial_pose.orientation.y = 0.0\r\n        initial_pose.orientation.z = 0.0\r\n        initial_pose.orientation.w = 1.0\r\n        request.initial_pose = initial_pose\r\n        \r\n        # Call the service\r\n        future = self.spawn_cli.call_async(request)\r\n        self.get_logger().info('Spawning robot model...')\r\n        \r\n        # Wait for response\r\n        rclpy.spin_until_future_complete(self, future)\r\n        \r\n        if future.result() is not None:\r\n            response = future.result()\r\n            if response.success:\r\n                self.get_logger().info(f'Successfully spawned robot: {response.status_message}')\r\n            else:\r\n                self.get_logger().error(f'Failed to spawn robot: {response.status_message}')\r\n        else:\r\n            self.get_logger().error('Service call failed')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    robot_spawner = RobotSpawner()\r\n    \r\n    try:\r\n        rclpy.spin(robot_spawner)\r\n    except KeyboardInterrupt:\r\n        robot_spawner.get_logger().info('Shutting down robot spawner...')\r\n    finally:\r\n        robot_spawner.destroy_node()\r\n        rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,o.jsx)(r.h2,{id:"working-with-sensors-in-gazebo",children:"Working with Sensors in Gazebo"}),"\n",(0,o.jsx)(r.h3,{id:"robot-model-with-sensors",children:"Robot Model with Sensors"}),"\n",(0,o.jsxs)(r.p,{children:["Create ",(0,o.jsx)(r.code,{children:"my_robot_gazebo/models/sensor_robot/model.sdf"})," with sensors:"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-xml",children:'<?xml version="1.0" ?>\r\n<sdf version="1.7">\r\n  <model name="sensor_robot">\r\n    <pose>0 0 0.5 0 0 0</pose>\r\n    \r\n    \x3c!-- Chassis with sensors --\x3e\r\n    <link name="chassis">\r\n      <pose>0 0 0.1 0 0 0</pose>\r\n      <collision name="collision">\r\n        <geometry>\r\n          <box>\r\n            <size>0.5 0.3 0.2</size>\r\n          </box>\r\n        </geometry>\r\n      </collision>\r\n      <visual name="visual">\r\n        <geometry>\r\n          <box>\r\n            <size>0.5 0.3 0.2</size>\r\n          </box>\r\n        </geometry>\r\n        <material>\r\n          <ambient>0.0 0.8 0.8 1</ambient>\r\n          <diffuse>0.0 0.8 0.8 1</diffuse>\r\n          <specular>0.8 0.8 0.8 1</specular>\r\n        </material>\r\n      </visual>\r\n      <inertial>\r\n        <mass>5</mass>\r\n        <inertia>\r\n          <ixx>0.1</ixx>\r\n          <ixy>0</ixy>\r\n          <ixz>0</ixz>\r\n          <iyy>0.2</iyy>\r\n          <iyz>0</iyz>\r\n          <izz>0.25</izz>\r\n        </inertia>\r\n      </inertial>\r\n      \r\n      \x3c!-- Camera sensor --\x3e\r\n      <sensor name="camera" type="camera">\r\n        <pose>0.2 0 0.1 0 0 0</pose>\r\n        <camera name="head">\r\n          <horizontal_fov>1.047</horizontal_fov>\r\n          <image>\r\n            <width>640</width>\r\n            <height>480</height>\r\n            <format>R8G8B8</format>\r\n          </image>\r\n          <clip>\r\n            <near>0.1</near>\r\n            <far>10</far>\r\n          </clip>\r\n        </camera>\r\n        <always_on>1</always_on>\r\n        <update_rate>30</update_rate>\r\n        <visualize>true</visualize>\r\n      </sensor>\r\n      \r\n      \x3c!-- Laser scanner --\x3e\r\n      <sensor name="laser" type="ray">\r\n        <pose>0.2 0 0.1 0 0 0</pose>\r\n        <ray>\r\n          <scan>\r\n            <horizontal>\r\n              <samples>360</samples>\r\n              <resolution>1</resolution>\r\n              <min_angle>-1.57</min_angle>\r\n              <max_angle>1.57</max_angle>\r\n            </horizontal>\r\n          </scan>\r\n          <range>\r\n            <min>0.1</min>\r\n            <max>10.0</max>\r\n            <resolution>0.01</resolution>\r\n          </range>\r\n        </ray>\r\n        <always_on>1</always_on>\r\n        <update_rate>10</update_rate>\r\n        <visualize>true</visualize>\r\n      </sensor>\r\n      \r\n      \x3c!-- IMU sensor --\x3e\r\n      <sensor name="imu_sensor" type="imu">\r\n        <pose>0 0 0.1 0 0 0</pose>\r\n        <always_on>1</always_on>\r\n        <update_rate>50</update_rate>\r\n        <visualize>false</visualize>\r\n      </sensor>\r\n    </link>\r\n    \r\n    \x3c!-- Left wheel --\x3e\r\n    <link name="left_wheel">\r\n      <collision name="collision">\r\n        <geometry>\r\n          <cylinder>\r\n            <radius>0.1</radius>\r\n            <length>0.05</length>\r\n          </cylinder>\r\n        </geometry>\r\n      </collision>\r\n      <visual name="visual">\r\n        <geometry>\r\n          <cylinder>\r\n            <radius>0.1</radius>\r\n            <length>0.05</length>\r\n          </cylinder>\r\n        </geometry>\r\n        <material>\r\n          <ambient>0.2 0.2 0.2 1</ambient>\r\n          <diffuse>0.2 0.2 0.2 1</diffuse>\r\n          <specular>0.8 0.8 0.8 1</specular>\r\n        </material>\r\n      </visual>\r\n      <inertial>\r\n        <mass>0.5</mass>\r\n        <inertia>\r\n          <ixx>0.001</ixx>\r\n          <ixy>0</ixy>\r\n          <ixz>0</ixz>\r\n          <iyy>0.001</iyy>\r\n          <iyz>0</iyz>\r\n          <izz>0.002</izz>\r\n        </inertia>\r\n      </inertial>\r\n    </link>\r\n    \r\n    \x3c!-- Right wheel --\x3e\r\n    <link name="right_wheel">\r\n      <collision name="collision">\r\n        <geometry>\r\n          <cylinder>\r\n            <radius>0.1</radius>\r\n            <length>0.05</length>\r\n          </cylinder>\r\n        </geometry>\r\n      </collision>\r\n      <visual name="visual">\r\n        <geometry>\r\n          <cylinder>\r\n            <radius>0.1</radius>\r\n            <length>0.05</length>\r\n          </cylinder>\r\n        </geometry>\r\n        <material>\r\n          <ambient>0.2 0.2 0.2 1</ambient>\r\n          <diffuse>0.2 0.2 0.2 1</diffuse>\r\n          <specular>0.8 0.8 0.8 1</specular>\r\n        </material>\r\n      </visual>\r\n      <inertial>\r\n        <mass>0.5</mass>\r\n        <inertia>\r\n          <ixx>0.001</ixx>\r\n          <ixy>0</ixy>\r\n          <ixz>0</ixz>\r\n          <iyy>0.001</iyy>\r\n          <iyz>0</iyz>\r\n          <izz>0.002</izz>\r\n        </inertia>\r\n      </inertial>\r\n    </link>\r\n    \r\n    \x3c!-- Joints --\x3e\r\n    <joint name="left_wheel_joint" type="continuous">\r\n      <parent>chassis</parent>\r\n      <child>left_wheel</child>\r\n      <pose>0.15 0.2 0 0 0 0</pose>\r\n      <axis>\r\n        <xyz>0 1 0</xyz>\r\n      </axis>\r\n    </joint>\r\n    \r\n    <joint name="right_wheel_joint" type="continuous">\r\n      <parent>chassis</parent>\r\n      <child>right_wheel</child>\r\n      <pose>0.15 -0.2 0 0 0 0</pose>\r\n      <axis>\r\n        <xyz>0 1 0</xyz>\r\n      </axis>\r\n    </joint>\r\n  </model>\r\n</sdf>\n'})}),"\n",(0,o.jsx)(r.h2,{id:"launch-files-for-simulation",children:"Launch Files for Simulation"}),"\n",(0,o.jsx)(r.h3,{id:"basic-simulation-launch-file",children:"Basic Simulation Launch File"}),"\n",(0,o.jsxs)(r.p,{children:["Create ",(0,o.jsx)(r.code,{children:"my_robot_gazebo/launch/basic_simulation.launch.py"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:"import os\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import IncludeLaunchDescription, ExecuteProcess, RegisterEventHandler\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\r\nfrom launch_ros.actions import Node\r\nfrom launch_ros.substitutions import FindPackageShare\r\nfrom launch.event_handlers import OnProcessExit\r\nfrom ament_index_python.packages import get_package_share_directory\r\n\r\n\r\ndef generate_launch_description():\r\n    # Get the package directory\r\n    pkg_share = get_package_share_directory('my_robot_gazebo')\r\n    \r\n    # World file path\r\n    world_file = os.path.join(pkg_share, 'worlds', 'basic_world.sdf')\r\n    \r\n    # Launch Gazebo with the world\r\n    gazebo = ExecuteProcess(\r\n        cmd=['gazebo', '--verbose', world_file, \r\n             '-s', 'libgazebo_ros_init.so',\r\n             '-s', 'libgazebo_ros_factory.so'],\r\n        output='screen'\r\n    )\r\n    \r\n    # Robot State Publisher for URDF\r\n    urdf_file = os.path.join(pkg_share, 'urdf', 'my_robot.urdf')\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        name='robot_state_publisher',\r\n        output='screen',\r\n        parameters=[{'use_sim_time': True}]\r\n    )\r\n    \r\n    # Static transform publisher for base footprint\r\n    static_tf_publisher = Node(\r\n        package='tf2_ros',\r\n        executable='static_transform_publisher',\r\n        name='static_tf_publisher',\r\n        output='screen',\r\n        arguments=['0', '0', '0', '0', '0', '0', 'base_footprint', 'base_link']\r\n    )\r\n    \r\n    # Joint State Publisher\r\n    joint_state_publisher = Node(\r\n        package='joint_state_publisher',\r\n        executable='joint_state_publisher',\r\n        name='joint_state_publisher',\r\n        parameters=[{'use_sim_time': True}],\r\n        remappings=[('/robot_description', '/robot_description')]\r\n    )\r\n    \r\n    return LaunchDescription([\r\n        gazebo,\r\n        robot_state_publisher,\r\n        static_tf_publisher,\r\n        joint_state_publisher,\r\n    ])\n"})}),"\n",(0,o.jsx)(r.h3,{id:"advanced-simulation-launch-file",children:"Advanced Simulation Launch File"}),"\n",(0,o.jsxs)(r.p,{children:["Create ",(0,o.jsx)(r.code,{children:"my_robot_gazebo/launch/advanced_simulation.launch.py"}),":"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-python",children:"import os\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import IncludeLaunchDescription, ExecuteProcess\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\r\nfrom launch_ros.actions import Node\r\nfrom launch_ros.substitutions import FindPackageShare\r\nfrom ament_index_python.packages import get_package_share_directory\r\n\r\n\r\ndef generate_launch_description():\r\n    # Get the package directory\r\n    pkg_share = get_package_share_directory('my_robot_gazebo')\r\n    \r\n    # Advanced world file path\r\n    world_file = os.path.join(pkg_share, 'worlds', 'advanced_world.sdf')\r\n    \r\n    # Launch Gazebo with the world\r\n    gazebo = ExecuteProcess(\r\n        cmd=['gazebo', '--verbose', world_file, \r\n             '-s', 'libgazebo_ros_init.so',\r\n             '-s', 'libgazebo_ros_factory.so'],\r\n        output='screen'\r\n    )\r\n    \r\n    # Robot State Publisher for URDF\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        name='robot_state_publisher',\r\n        output='screen',\r\n        parameters=[{'use_sim_time': True}]\r\n    )\r\n    \r\n    # Launch controller manager\r\n    controller_manager = Node(\r\n        package='controller_manager',\r\n        executable='ros2_control_node',\r\n        parameters=[\r\n            os.path.join(pkg_share, 'config', 'my_robot_controllers.yaml'),\r\n            {'use_sim_time': True}\r\n        ],\r\n        output='screen'\r\n    )\r\n    \r\n    # Spawn controllers\r\n    spawn_joint_state_controller = ExecuteProcess(\r\n        cmd=['ros2', 'control', 'load_controller', '--set-state', 'start',\r\n             'joint_state_broadcaster'],\r\n        output='screen'\r\n    )\r\n    \r\n    spawn_velocity_controller = ExecuteProcess(\r\n        cmd=['ros2', 'control', 'load_controller', '--set-state', 'start',\r\n             'diff_drive_controller'],\r\n        output='screen'\r\n    )\r\n    \r\n    return LaunchDescription([\r\n        gazebo,\r\n        robot_state_publisher,\r\n        controller_manager,\r\n        spawn_joint_state_controller,\r\n        spawn_velocity_controller,\r\n    ])\n"})}),"\n",(0,o.jsx)(r.h2,{id:"physics-configuration",children:"Physics Configuration"}),"\n",(0,o.jsx)(r.h3,{id:"understanding-physics-parameters",children:"Understanding Physics Parameters"}),"\n",(0,o.jsx)(r.p,{children:"Physics configuration in Gazebo affects simulation accuracy and performance:"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-xml",children:'<physics name="ode" default="0" type="ode">\r\n  <gravity>0 0 -9.8</gravity>\r\n  \r\n  \x3c!-- Solver settings --\x3e\r\n  <ode>\r\n    <solver>\r\n      <type>quick</type>  \x3c!-- quick or world --\x3e\r\n      <iters>100</iters>  \x3c!-- Number of iterations for error correction --\x3e\r\n      <sor>1.3</sor>      \x3c!-- Successive Over Relaxation parameter --\x3e\r\n    </solver>\r\n    \r\n    \x3c!-- Constraint settings --\x3e\r\n    <constraints>\r\n      <cfm>0.0</cfm>  \x3c!-- Constraint Force Mixing --\x3e\r\n      <erp>0.2</erp>  \x3c!-- Error Reduction Parameter --\x3e\r\n      \x3c!-- Max velocity for contact correction --\x3e\r\n      <contact_max_correcting_vel>100.0</contact_max_correcting_vel>\r\n      \x3c!-- Contact layer depth --\x3e\r\n      <contact_surface_layer>0.001</contact_surface_layer>\r\n    </constraints>\r\n  </ode>\r\n  \r\n  \x3c!-- Time stepping settings --\x3e\r\n  <max_step_size>0.001</max_step_size>        \x3c!-- Simulation time step --\x3e\r\n  <real_time_factor>1</real_time_factor>      \x3c!-- Simulation speed relative to real time --\x3e\r\n  <real_time_update_rate>1000</real_time_update_rate>  \x3c!-- Update rate in Hz --\x3e\r\n</physics>\n'})}),"\n",(0,o.jsx)(r.h3,{id:"performance-vs-accuracy-trade-offs",children:"Performance vs. Accuracy Trade-offs"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Smaller step size"}),": Higher accuracy but slower simulation"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"More solver iterations"}),": Higher accuracy but slower simulation"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Higher real-time factor"}),": Faster simulation but potentially less stable"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Higher update rate"}),": More responsive but more computationally expensive"]}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(r.p,{children:"This submodule covered the fundamental concepts of simulation in Gazebo:"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"SDF (Simulation Description Format) structure and components"}),"\n",(0,o.jsx)(r.li,{children:"Creating custom worlds with objects, obstacles, and environments"}),"\n",(0,o.jsx)(r.li,{children:"Building robot models with links, joints, and sensors"}),"\n",(0,o.jsx)(r.li,{children:"Spawning robots programmatically using ROS 2 services"}),"\n",(0,o.jsx)(r.li,{children:"Working with various sensor types in simulation"}),"\n",(0,o.jsx)(r.li,{children:"Creating launch files to automate simulation workflows"}),"\n",(0,o.jsx)(r.li,{children:"Physics configuration and performance considerations"}),"\n"]}),"\n",(0,o.jsx)(r.p,{children:"Understanding these basic concepts is crucial for creating effective and realistic robot simulations. In the next submodule, we'll explore controlling robots in simulation and working with sensor data."})]})}function m(n={}){const{wrapper:r}={...(0,s.R)(),...n.components};return r?(0,o.jsx)(r,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},8453:(n,r,e)=>{e.d(r,{R:()=>a,x:()=>t});var i=e(6540);const o={},s=i.createContext(o);function a(n){const r=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(r):{...r,...n}},[r,n])}function t(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),i.createElement(s.Provider,{value:r},n.children)}}}]);